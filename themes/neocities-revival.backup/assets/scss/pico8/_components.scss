/* üéÆ PICO-8 Design System Components
 * Pixel-perfect UI elements for the fantasy console web
 */

// ================================
// üåç GLOBAL BASE STYLES
// ================================

html {
    background: var(--color-background);
    color: var(--color-text);
    @include p8-text();
    @include p8-pixel-perfect();
}

body {
    margin: 0;
    padding: 0;
    background: var(--color-background);
    color: var(--color-text);
    overflow-x: hidden; // Prevent horizontal scroll on pixel effects
}

* {
    box-sizing: border-box;
}

// ================================
// üéØ TYPOGRAPHY COMPONENTS
// ================================

.p8-heading {
    margin: var(--space-2) 0;

    &--h1 {
        @include p8-heading(1);
    }

    &--h2 {
        @include p8-heading(2);
    }

    &--h3 {
        @include p8-heading(3);
    }

    &--h4 {
        @include p8-heading(4);
    }
}

h1,
h2,
h3,
h4,
h5,
h6 {
    @extend .p8-heading;
}

h1 {
    @extend .p8-heading--h1;
}

h2 {
    @extend .p8-heading--h2;
}

h3 {
    @extend .p8-heading--h3;
}

h4 {
    @extend .p8-heading--h4;
}

.p8-text {
    @include p8-text();
    margin: var(--space-1) 0;

    &--large {
        font-size: var(--text-size-md);
    }

    &--small {
        font-size: var(--text-size-xs);
    }

    &--muted {
        color: var(--color-text-muted);
    }

    &--accent {
        color: var(--color-accent);
    }

    &--primary {
        color: var(--color-primary);
    }

    &--glow {
        @include p8-glow();
    }
}

.p8-ascii {
    @include p8-ascii-art();
    margin: var(--space-2) 0;

    &--blink {
        @include p8-blink();
    }

    &--pulse {
        @include p8-pulse();
    }
}

.p8-code {
    @include p8-code();
    display: inline-block;

    &--block {
        display: block;
        padding: var(--space-2);
        margin: var(--space-2) 0;
        overflow-x: auto;
    }
}

// ================================
// üîò BUTTON COMPONENTS
// ================================

.p8-btn {
    @include p8-button();

    // Button variants
    &--primary {
        @include p8-button('primary');
    }

    &--secondary {
        @include p8-button('secondary');
    }

    &--danger {
        @include p8-button('danger');
    }

    // Button sizes
    &--small {
        padding: calc(var(--space-1) / 2) var(--space-1);
        font-size: var(--text-size-xs);
    }

    &--large {
        padding: var(--space-2) var(--space-4);
        font-size: var(--text-size-md);
    }

    // Special effects
    &--glow {
        @include p8-border-glow();
    }

    &--pulse {
        @include p8-pulse();
    }
}

// Button groups
.p8-btn-group {
    @include p8-row(0);

    .p8-btn {
        border-radius: 0;

        &:not(:last-child) {
            border-right: none;
        }

        &:first-child {
            border-top-left-radius: var(--border-radius-pixel);
        }

        &:last-child {
            border-top-right-radius: var(--border-radius-pixel);
        }
    }
}

// ================================
// üì± CARD COMPONENTS
// ================================

.p8-card {
    @include p8-card();
    margin: var(--space-2) 0;

    &__header {
        @include p8-heading(3);
        margin: 0 0 var(--space-2) 0;
        padding-bottom: var(--space-1);
        border-bottom: var(--border-width-thin) solid var(--color-border-muted);
    }

    &__body {
        margin: var(--space-2) 0;
    }

    &__footer {
        margin-top: var(--space-2);
        padding-top: var(--space-1);
        border-top: var(--border-width-thin) solid var(--color-border-muted);
        @include p8-row();
        justify-content: flex-end;
    }

    // Card variants
    &--raised {
        @include p8-shadow(4px, 4px);

        &:hover {
            @include p8-shadow(6px, 6px);
            transform: translate(-2px, -2px);
        }
    }

    &--glow {
        @include p8-border-glow();
    }

    &--inset {
        @include p8-inset-border();
        background: var(--color-background);
    }
}

// ================================
// üìù FORM COMPONENTS
// ================================

.p8-input {
    @include p8-input();
    width: 100%;
    margin: var(--space-1) 0;

    &--small {
        padding: calc(var(--space-1) / 2);
        font-size: var(--text-size-xs);
    }

    &--large {
        padding: var(--space-2);
        font-size: var(--text-size-md);
    }
}

.p8-textarea {
    @extend .p8-input;
    resize: vertical;
    min-height: calc(var(--space-1) * 6);
    font-family: var(--font-mono);
}

.p8-select {
    @extend .p8-input;
    background-image:
        linear-gradient(45deg, transparent 50%, var(--color-text) 50%),
        linear-gradient(135deg, var(--color-text) 50%, transparent 50%);
    background-position:
        calc(100% - var(--space-1)) center,
        calc(100% - calc(var(--space-1) / 2)) center;
    background-size:
        calc(var(--space-1) / 2) calc(var(--space-1) / 2),
        calc(var(--space-1) / 2) calc(var(--space-1) / 2);
    background-repeat: no-repeat;
    padding-right: var(--space-3);
    appearance: none;
}

.p8-checkbox,
.p8-radio {
    appearance: none;
    width: var(--space-2);
    height: var(--space-2);
    background: var(--color-surface);
    @include p8-border();
    position: relative;
    margin-right: var(--space-1);

    &:checked {
        background: var(--color-primary);

        &::after {
            content: '';
            position: absolute;
            top: 1px;
            left: 1px;
            right: 1px;
            bottom: 1px;
            background: var(--color-background);
        }
    }

    &:focus {
        @include p8-border(var(--color-accent));
    }
}

.p8-radio {
    border-radius: 50%;

    &:checked::after {
        border-radius: 50%;
    }
}

.p8-label {
    @include p8-text();
    @include p8-row();
    cursor: pointer;
    margin: var(--space-1) 0;

    &:hover {
        color: var(--color-primary);
    }
}

// ================================
// üß≠ NAVIGATION COMPONENTS
// ================================

.p8-nav {
    background: var(--color-surface);
    @include p8-border(var(--color-border), var(--border-width-thin));
    padding: var(--space-1) var(--space-2);

    &__brand {
        @include p8-heading(3);
        color: var(--color-primary);
        text-decoration: none;
        @include p8-glow(var(--color-primary));
    }

    &__links {
        @include p8-row();
        list-style: none;
        margin: 0;
        padding: 0;
    }

    &__link {
        @include p8-text();
        color: var(--color-text);
        text-decoration: none;
        padding: var(--space-1) var(--space-2);
        @include p8-hover-lift();

        &:hover {
            color: var(--color-primary);
            @include p8-glow(var(--color-primary), 4px);
        }

        &--active {
            color: var(--color-accent);
            background: var(--color-surface-alt);
            @include p8-border(var(--color-accent));
        }
    }
}

// ================================
// üìä DATA DISPLAY COMPONENTS
// ================================

.p8-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    @include p8-border();
    background: var(--color-surface);

    th,
    td {
        @include p8-text();
        padding: var(--space-1);
        border-right: var(--border-width-thin) solid var(--color-border-muted);
        border-bottom: var(--border-width-thin) solid var(--color-border-muted);

        &:last-child {
            border-right: none;
        }
    }

    th {
        background: var(--color-surface-alt);
        color: var(--color-primary);
        @include p8-text-shadow();
    }

    tr:last-child td {
        border-bottom: none;
    }

    tr:nth-child(even) td {
        background: var(--color-surface-light);
    }
}

.p8-badge {
    @include p8-text(var(--text-size-xs));
    padding: calc(var(--space-1) / 2) var(--space-1);
    background: var(--color-primary);
    color: var(--color-background);
    @include p8-border(var(--color-primary));
    display: inline-block;

    &--secondary {
        background: var(--color-secondary);
        @include p8-border(var(--color-secondary));
    }

    &--danger {
        background: var(--color-danger);
        @include p8-border(var(--color-danger));
    }

    &--glow {
        @include p8-glow();
    }
}

// ================================
// üé™ LAYOUT COMPONENTS
// ================================

.p8-container {
    @include p8-container();
}

.p8-grid {
    @include p8-grid-responsive();
}

.p8-stack {
    @include p8-stack();
}

.p8-row {
    @include p8-row();
}

.p8-center {
    @include p8-flex-center();
}

.p8-panel {
    @include p8-panel();
    padding: var(--space-2);
    margin: var(--space-2) 0;

    &--inset {
        @extend .p8-panel;
        @include p8-inset-border();
        background: var(--color-background);
    }

    &--raised {
        @extend .p8-panel;
        @include p8-shadow(4px, 4px);
        background: var(--color-surface-light);
    }
}

// ================================
// ‚ú® SPECIAL EFFECTS
// ================================

.p8-glow {
    @include p8-glow();

    &--primary {
        @include p8-glow(var(--color-primary));
    }

    &--secondary {
        @include p8-glow(var(--color-secondary));
    }

    &--accent {
        @include p8-glow(var(--color-accent));
    }

    &--danger {
        @include p8-glow(var(--color-danger));
    }
}

.p8-pulse {
    @include p8-pulse();

    &--primary {
        @include p8-pulse(var(--color-primary));
    }

    &--secondary {
        @include p8-pulse(var(--color-secondary));
    }

    &--accent {
        @include p8-pulse(var(--color-accent));
    }
}

.p8-blink {
    @include p8-blink();
}

.p8-float {
    @include p8-float();
}

.p8-hover-lift {
    @include p8-hover-lift();
}

// ================================
// üé® UTILITY CLASSES
// ================================

// Spacing utilities
@each $name, $value in ('xs': var(--space-xs),
    'sm': var(--space-sm),
    'md': var(--space-md),
    'lg': var(--space-lg),
    'xl': var(--space-xl)) {
    .p8-m-#{$name} {
        margin: #{$value};
    }

    .p8-mt-#{$name} {
        margin-top: #{$value};
    }

    .p8-mr-#{$name} {
        margin-right: #{$value};
    }

    .p8-mb-#{$name} {
        margin-bottom: #{$value};
    }

    .p8-ml-#{$name} {
        margin-left: #{$value};
    }

    .p8-mx-#{$name} {
        margin-left: #{$value};
        margin-right: #{$value};
    }

    .p8-my-#{$name} {
        margin-top: #{$value};
        margin-bottom: #{$value};
    }

    .p8-p-#{$name} {
        padding: #{$value};
    }

    .p8-pt-#{$name} {
        padding-top: #{$value};
    }

    .p8-pr-#{$name} {
        padding-right: #{$value};
    }

    .p8-pb-#{$name} {
        padding-bottom: #{$value};
    }

    .p8-pl-#{$name} {
        padding-left: #{$value};
    }

    .p8-px-#{$name} {
        padding-left: #{$value};
        padding-right: #{$value};
    }

    .p8-py-#{$name} {
        padding-top: #{$value};
        padding-bottom: #{$value};
    }
}

// Color utilities
@each $name, $value in ('primary': var(--color-primary),
    'secondary': var(--color-secondary),
    'accent': var(--color-accent),
    'danger': var(--color-danger),
    'success': var(--color-success),
    'warning': var(--color-warning),
    'info': var(--color-info),
    'text': var(--color-text),
    'text-muted': var(--color-text-muted)) {
    .p8-text-#{$name} {
        color: #{$value};
    }

    .p8-bg-#{$name} {
        background-color: #{$value};
    }

    .p8-border-#{$name} {
        border-color: #{$value};
    }
}

// Display utilities
.p8-hidden {
    display: none;
}

.p8-block {
    display: block;
}

.p8-inline {
    display: inline;
}

.p8-inline-block {
    display: inline-block;
}

.p8-flex {
    display: flex;
}

.p8-grid {
    display: grid;
}

// Position utilities
.p8-relative {
    position: relative;
}

.p8-absolute {
    position: absolute;
}

.p8-fixed {
    position: fixed;
}

.p8-sticky {
    position: sticky;
}

// Text utilities
.p8-text-left {
    text-align: left;
}

.p8-text-center {
    text-align: center;
}

.p8-text-right {
    text-align: right;
}

.p8-text-uppercase {
    text-transform: uppercase;
}

.p8-text-lowercase {
    text-transform: lowercase;
}

// Pixel perfect utilities
.p8-pixel-perfect {
    @include p8-pixel-perfect();
}

.p8-no-select {
    @include p8-no-select();
}

.p8-clickable {
    @include p8-clickable();
}

.p8-screen-reader-only {
    @include p8-screen-reader-only();
}

// ================================
// üéÆ PICO-8 KEYFRAMES
// ================================

@keyframes p8-blink {

    0%,
    50% {
        opacity: 1;
    }

    51%,
    100% {
        opacity: 0;
    }
}

@keyframes p8-pulse {

    0%,
    100% {
        opacity: 1;
        transform: scale(1);
    }

    50% {
        opacity: 0.7;
        transform: scale(1.125);
    }
}

@keyframes p8-float {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-var(--space-1));
    }
}

@keyframes p8-shake {

    0%,
    100% {
        transform: translateX(0);
    }

    25% {
        transform: translateX(-2px);
    }

    75% {
        transform: translateX(2px);
    }
}

@keyframes p8-spin {
    from {
        transform: rotate(0deg);
    }

    to {
        transform: rotate(360deg);
    }
}

@keyframes p8-bounce {

    0%,
    20%,
    53%,
    80%,
    100% {
        transform: translateY(0);
    }

    40%,
    43% {
        transform: translateY(-var(--space-3));
    }

    70% {
        transform: translateY(-var(--space-1));
    }

    90% {
        transform: translateY(-var(--space-1));
    }
}